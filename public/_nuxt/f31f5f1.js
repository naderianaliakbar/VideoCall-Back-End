(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{629:function(t,e,r){"use strict";r.r(e);var o=r(18),n=(r(89),r(3),r(79)),l={name:"dashboard",auth:!0,components:{ValidationObserver:n.a,ValidationProvider:n.b},data:function(){return{callsLoading:!1,profileEditMode:!1,editForm:{firstName:"",lastName:"",email:"",color:""},callsList:[],colorPickerDialog:!1,logoutDialog:!1,editProfileLoading:!1}},mounted:function(){this.editForm.firstName=this.$auth.user.firstName,this.editForm.lastName=this.$auth.user.lastName,this.editForm.email=this.$auth.user.email,this.editForm.color=this.$auth.user.color,this.getCalls()},computed:{directionOfLanguage:function(){return this.$nuxt.$i18n.localeProperties.dir}},methods:{editProfile:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.editProfileLoading=!0,t.$axios.put("users/me",t.editForm).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$notifier.showMessage({content:t.$t("EDIT_SUCCESSFUL"),color:"success"}),e.next=3,t.$auth.fetchUser();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var r=e.response;if(r.status){if(406===r.status)t.$notifier.showMessage({content:t.$t("EMAIL_EXISTS"),color:"error"})}else t.$notifier.showMessage({content:t.$t("REQUEST_FAILED"),color:"error"})})).finally((function(){t.editProfileLoading=!1}));case 2:case"end":return e.stop()}}),e)})))()},getCalls:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.callsLoading=!0,t.$axios.get("calls").then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.callsList=r.data.calls,t.callsLoading=!1;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()},setColor:function(t){this.editForm.color=t.hex},logout:function(){this.$auth.logout()}}},c=l,d=r(81),v=r(74),m=r.n(v),f=r(531),_=r(564),h=r(559),x=r(547),L=r(625),C=r(619),$=r(532),k=r(255),E=r(256),y=r(162),w=r(257),F=r(80),D=r(138),N=r(548),O=r(45),S=r(620),V=r(250),P=r(621),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-sheet",{staticClass:"pa-5 rounded-lg",attrs:{"min-height":"80vh"}},[r("h1",[t._v("\n    "+t._s(t.$t("DASHBOARD"))+"\n    "),t._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"mt-1",class:"rtl"===t.directionOfLanguage?"float-left":"float-right",attrs:{outlined:"",icon:""},on:{click:function(e){t.profileEditMode=!t.profileEditMode}}},"v-btn",n,!1),o),[t.profileEditMode?t._e():r("v-icon",[t._v("mdi-account-edit-outline")]),t._v(" "),t.profileEditMode?r("v-icon",[t._v("mdi-account-edit")]):t._e()],1)]}}])},[t._v(" "),r("span",[t._v(t._s(t.$t("EDIT_PROFILE")))])]),t._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,n=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"mt-1 mx-2",class:"rtl"===t.directionOfLanguage?"float-left":"float-right",attrs:{outlined:"",icon:""},on:{click:function(e){t.logoutDialog=!0}}},"v-btn",n,!1),o),[r("v-icon",[t._v("mdi-logout-variant")])],1)]}}])},[t._v(" "),r("span",[t._v(t._s(t.$t("LOGOUT")))])]),t._v(" "),r("v-dialog",{attrs:{width:"325px",transition:"scale-transition"},model:{value:t.logoutDialog,callback:function(e){t.logoutDialog=e},expression:"logoutDialog"}},[r("v-card",[r("v-card-title",{staticClass:"primary"},[t._v(t._s(t.$t("LOGOUT")))]),t._v(" "),r("v-card-text",{staticClass:"text-h6 mt-4"},[t._v("\n          "+t._s(t.$t("ARE_YOU_SURE"))+"\n        ")]),t._v(" "),r("v-card-actions",[r("v-btn",{attrs:{text:""},on:{click:t.logout}},[t._v(" "+t._s(t.$t("YES")))]),t._v(" "),r("v-btn",{attrs:{text:""},on:{click:function(e){t.logoutDialog=!1}}},[t._v(" "+t._s(t.$t("NO")))])],1)],1)],1)],1),t._v(" "),r("v-row",{staticClass:"mt-3"},[r("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"3"}},[r("ContactAvatar",{staticClass:"mx-2 my-3 my-md-1",attrs:{edit:1,size:t.$vuetify.breakpoint.smAndDown?80:200,avatar:t.$auth.user.avatar,name:t.$auth.user.firstName,color:t.$auth.user.color}})],1),t._v(" "),r("v-col",{staticClass:"mt-md-6 justify-center",attrs:{cols:"9"}},[t.profileEditMode?r("validation-observer",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var o=e.invalid;return[r("form",{on:{submit:function(e){return e.preventDefault(),t.editProfile.apply(null,arguments)}}},[r("validation-provider",{attrs:{name:"first name",rules:"required|max:20"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,n=e.valid;return[r("v-text-field",{attrs:{counter:20,disabled:t.editProfileLoading,"error-messages":o,color:n?"green":"","append-icon":n?"mdi-check":"",label:t.$t("FIRST_NAME")},model:{value:t.editForm.firstName,callback:function(e){t.$set(t.editForm,"firstName",e)},expression:"editForm.firstName"}})]}}],null,!0)}),t._v(" "),r("validation-provider",{attrs:{name:"last name",rules:"required|max:20"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,n=e.valid;return[r("v-text-field",{attrs:{counter:20,disabled:t.editProfileLoading,"error-messages":o,color:n?"green":"","append-icon":n?"mdi-check":"",label:t.$t("LAST_NAME")},model:{value:t.editForm.lastName,callback:function(e){t.$set(t.editForm,"lastName",e)},expression:"editForm.lastName"}})]}}],null,!0)}),t._v(" "),r("validation-provider",{attrs:{name:"email",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,n=e.valid;return[r("v-text-field",{attrs:{"error-messages":o,disabled:t.editProfileLoading,color:n?"green":"","append-icon":n?"mdi-check":"",label:t.$t("E_MAIL")},model:{value:t.editForm.email,callback:function(e){t.$set(t.editForm,"email",e)},expression:"editForm.email"}})]}}],null,!0)}),t._v(" "),r("validation-provider",{attrs:{name:"color",rules:"required|color"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.errors,n=e.valid;return[r("v-text-field",{attrs:{disabled:t.editProfileLoading,"error-messages":o,color:n?"green":"","append-icon":n?"mdi-check":"",label:t.$t("COLOR")},scopedSlots:t._u([{key:"prepend-inner",fn:function(){return[r("v-icon",{attrs:{color:t.editForm.color},on:{click:function(e){t.colorPickerDialog=!0}}},[t._v("mdi-square")])]},proxy:!0}],null,!0),model:{value:t.editForm.color,callback:function(e){t.$set(t.editForm,"color",e)},expression:"editForm.color"}})]}}],null,!0)}),t._v(" "),r("v-btn",{class:"rtl"===t.directionOfLanguage?"float-left":"float-right",attrs:{color:"primary",type:"submit",loading:t.editProfileLoading,disabled:o}},[t._v("\n            "+t._s(t.$t("EDIT"))+"\n          ")])],1)]}}],null,!1,3540991975)}):t._e(),t._v(" "),r("v-dialog",{attrs:{width:"325",transition:"dialog-bottom-transition"},model:{value:t.colorPickerDialog,callback:function(e){t.colorPickerDialog=e},expression:"colorPickerDialog"}},[r("v-card",[r("v-color-picker",{staticClass:"ma-2",attrs:{"swatches-max-height":"200px","show-swatches":""},on:{input:t.setColor}})],1)],1),t._v(" "),t.profileEditMode?t._e():r("h2",{staticClass:"mt-7"},[t._v("\n        "+t._s(t.$auth.user.firstName+" "+t.$auth.user.lastName)+"\n      ")]),t._v(" "),t.profileEditMode?t._e():r("h2",{staticClass:"caption"},[t._v(t._s(t.$auth.user.email))])],1)],1),t._v(" "),r("v-divider",{staticClass:"my-6"}),t._v(" "),r("h2",[t._v("\n    "+t._s(t.$t("RECENT_CALLS"))+"\n    "),t._v(" "),r("v-btn",{class:"rtl"===t.directionOfLanguage?"float-left":"float-right",attrs:{to:"/contacts",color:"primary",elevation:"2",rounded:"",large:"",nuxt:""}},[r("v-icon",{staticClass:"mx-1"},[t._v("mdi-phone-outline")]),t._v(" "),r("span",{staticClass:"d-none d-md-flex"},[t._v("\n        "+t._s(t.$t("CREATE_CALL"))+"\n      ")])],1)],1),t._v(" "),t._l(5,(function(e){return t.callsLoading?r("v-skeleton-loader",{key:e,staticClass:"mt-3 mx-n3",attrs:{type:"list-item-avatar-two-line"}}):t._e()})),t._v(" "),t.callsLoading?t._e():r("v-list",{staticClass:"mt-3 mx-n3 mb-10",attrs:{nav:""}},t._l(t.callsList,(function(e){return r("v-list-item",{key:e._id},[e.creator?r("v-icon",{staticClass:"mx-1",attrs:{color:"green"}},[t._v("mdi-call-made")]):r("v-icon",{staticClass:"mx-1",attrs:{color:"blue"}},[t._v("mdi-call-received")]),t._v(" "),r("v-list-item-avatar",{staticClass:"mx-2 mx-md-4"},[r("ContactAvatar",{attrs:{avatar:e.user.avatar,name:e.user.firstName,color:e.user.color}})],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(e.user.firstName+" "+e.user.lastName))])],1),t._v(" "),r("v-list-item-icon",[r("h4",{domProps:{textContent:t._s("rtl"===t.directionOfLanguage?e.startDateJalali:e.startDate)}})])],1)})),1),t._v(" "),t.callsLoading||t.callsList.length?t._e():r("div",[r("v-row",{staticClass:"d-flex justify-center"},[r("h3",{staticClass:"my-16"},[t._v(t._s(t.$t("NO_CALLS")))])])],1)],2)}),[],!1,null,"112b3602",null);e.default=component.exports;m()(component,{ContactAvatar:r(354).default}),m()(component,{VBtn:f.a,VCard:_.a,VCardActions:h.a,VCardText:h.b,VCardTitle:h.c,VCol:x.a,VColorPicker:L.a,VDialog:C.a,VDivider:$.a,VIcon:k.a,VList:E.a,VListItem:y.a,VListItemAvatar:w.a,VListItemContent:F.a,VListItemIcon:D.a,VListItemTitle:F.c,VRow:N.a,VSheet:O.a,VSkeletonLoader:S.a,VTextField:V.a,VTooltip:P.a})}}]);